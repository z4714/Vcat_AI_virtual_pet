"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{49363:function(I,p,e){e.d(p,{W6:function(){return N},WZ:function(){return w},oP:function(){return P},r2:function(){return T},x4:function(){return y}});var j=e(25359),i=e.n(j),M=e(49811),g=e.n(M),b=e(73669),f=b.Z.create({baseURL:"http://59.110.7.219:1002",withCredentials:!1}),o=b.Z.create({baseURL:"http://localhost:8000",withCredentials:!0}),y=function(){var c=g()(i()().mark(function l(u,t){var d;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.post("/login/",{account:u,password:t});case 3:return d=n.sent,n.abrupt("return",d.data);case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},l,null,[[0,7]])}));return function(u,t){return c.apply(this,arguments)}}(),N=function(){var c=g()(i()().mark(function l(u,t){var d;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.post("/api/chat",{question:u,history:t});case 3:return d=n.sent,n.abrupt("return",d.data);case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},l,null,[[0,7]])}));return function(u,t){return c.apply(this,arguments)}}(),T=function(){var c=g()(i()().mark(function l(u,t,d,r,n,s){var G;return i()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,console.log(u),v.next=4,o.post("/register/userInfo",{account:u,password:t,nickname:d,gender:r,birth:n,avatar:s});case 4:return G=v.sent,v.abrupt("return",G.data);case 8:throw v.prev=8,v.t0=v.catch(0),v.t0;case 11:case"end":return v.stop()}},l,null,[[0,8]])}));return function(u,t,d,r,n,s){return c.apply(this,arguments)}}(),P=function(){var c=g()(i()().mark(function l(u){var t;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.post("/register/",{email:u});case 3:return t=r.sent,r.abrupt("return",t.data);case 7:throw r.prev=7,r.t0=r.catch(0),r.t0;case 10:case"end":return r.stop()}},l,null,[[0,7]])}));return function(u){return c.apply(this,arguments)}}(),w=function(){var c=g()(i()().mark(function l(u){var t;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.post("/register/",{captcha:u});case 3:return t=r.sent,r.abrupt("return",t.data);case 7:throw r.prev=7,r.t0=r.catch(0),r.t0;case 10:case"end":return r.stop()}},l,null,[[0,7]])}));return function(u){return c.apply(this,arguments)}}()},94191:function(I,p,e){e.d(p,{Z:function(){return N}});var j=e(80696),i=e(24699),M=e(52385),g=e(93236),b={title:"title___xIGPY"},f=e(62086),o=function(P){var w=P.name;return(0,f.jsx)(j.Z,{children:(0,f.jsx)(i.Z,{children:(0,f.jsxs)(M.Z.Title,{level:3,className:b.title,children:["\u6B22\u8FCE\u4F7F\u7528 ",(0,f.jsx)("strong",{children:w})," \uFF01"]})})})},y=o,N=y},16357:function(I,p,e){e.r(p),e.d(p,{default:function(){return B}});var j=e(25359),i=e.n(j),M=e(49811),g=e.n(M),b=e(54306),f=e.n(b),o=e(93236),y=e(83),N=e(67578),T=e(21020),P=e(95403),w=e(25450),c=e(94191),l=e(83669),u=e(49473),t={chatContainer:"chatContainer___apOiU","react-chat-widget":"react-chat-widget___l44zC","rcw-header":"rcw-header___rUZXU","rcw-title":"rcw-title___usclB","rcw-subtitle":"rcw-subtitle___kMGlB",replyBubble:"replyBubble___qG35i",chatResponse:"chatResponse___MJzjK",bubbleContent:"bubbleContent___voWqR"},d=e(84875),r=e.n(d),n=e(49363),s=e(62086),G=function(){var K=(0,P.useModel)("global"),H=K.name,A=(0,P.useModel)("@@initialState"),a=A.initialState,ie=A.setInitialState,z=(0,o.useState)(a),L=f()(z,2),V=L[0],J=L[1],X=(0,o.useState)([]),O=f()(X,2),Y=O[0],k=O[1],Q=(0,o.useState)(""),W=f()(Q,2),Z=W[0],x=W[1],q=N.Z.useNotification(),$=f()(q,2),S=$[0],ee=$[1],U=o.createContext({name:a==null?void 0:a.name}),D=a!=null&&a.loggedIn?"Hello,":"",ae=function(_){S.info({message:"Notification ".concat(_),description:(0,s.jsx)(U.Consumer,{children:function(C){var R=C.name;return"".concat(D).concat(R)}}),placement:_})},re=(0,o.useMemo)(function(){return{name:a==null?void 0:a.name}},[]);(0,o.useEffect)(function(){J(a)},[a]),(0,o.useEffect)(function(){var E=function(R){S.info({message:"User Notification",description:(0,s.jsx)(U.Consumer,{children:function(se){var le=se.name;return"".concat(D).concat(a==null?void 0:a.name,"!")}}),placement:R})};a!=null&&a.loggedIn?D=a!=null&&a.loggedIn?"Hello,":"":D="\u8BF7\u5148\u767B\u5F55\uFF0C\u73B0\u5728\u4E3A\u8BD5\u7528\u7248";var _=function(){E("topLeft")},m=document.querySelector(".rcw-launcher");return m&&m.addEventListener("click",_),function(){m&&m.removeEventListener("click",_)}},[a==null?void 0:a.loggedIn,S]);var ne=V,te=ne.cat_name,F=function(){var E=g()(i()().mark(function _(m){var C;return i()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,console.log(m),h.next=4,(0,n.W6)(m,Y);case 4:C=h.sent,console.log(C),x(C.response),k(C.history),h.next=13;break;case 10:h.prev=10,h.t0=h.catch(0),console.error(h.t0);case 13:case"end":return h.stop()}},_,null,[[0,10]])}));return function(m){return E.apply(this,arguments)}}();return a!=null&&a.loggedIn?(D=a!=null&&a.loggedIn?"Hello,":"",(0,s.jsx)(y._z,{ghost:!0,children:(0,s.jsxs)("div",{className:t.container,children:[(0,s.jsx)(c.Z,{name:(0,w.f)(H)}),(0,s.jsxs)("div",{className:t.chatContainer,children:[(0,s.jsx)(l.Widget,{handleNewUserMessage:F,title:"Chat with your Vcat~",subtitle:"\u5F53\u524D\u5BA0\u7269: ".concat(te)}),(0,s.jsx)("div",{className:t.chatResponse,children:(0,s.jsx)("div",{className:r()(t.chatBubble,t.replyBubble),children:(0,s.jsx)("div",{className:t.bubbleContent,children:Z})})})]})]})})):(D="\u8BF7\u5148\u767B\u5F55,\u73B0\u5728\u4E3A\u8BD5\u7528\u7248",(0,s.jsx)(y._z,{ghost:!0,children:(0,s.jsx)("div",{className:t.container,children:(0,s.jsxs)(U.Provider,{value:re,children:[ee,(0,s.jsx)(c.Z,{name:(0,w.f)(H)}),(0,s.jsxs)("div",{className:t.chatContainer,children:[(0,s.jsx)(l.Widget,{handleNewUserMessage:F,title:"Try Vcat~",subtitle:"\u5F53\u524D\u5BA0\u7269: Vcat_0",onClick:function(){return ae("topLeft")}}),(0,s.jsx)("div",{className:t.chatResponse,children:(0,s.jsxs)("div",{className:r()(t.chatBubble,t.replyBubble),children:[(0,s.jsx)(T.C,{src:a==null?void 0:a.avatar,alt:"User:"}),":",(0,s.jsx)("div",{className:t.bubbleContent,children:Z})]})})]})]})})}))},B=G},25450:function(I,p,e){e.d(p,{f:function(){return j}});function j(i){return i.trim()}}}]);
