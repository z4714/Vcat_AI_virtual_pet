"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[739],{49363:function($,A,r){r.d(A,{W6:function(){return p},WZ:function(){return G},oP:function(){return M},r2:function(){return Z},x4:function(){return m}});var T=r(25359),t=r.n(T),L=r(49811),P=r.n(L),B=r(73669),S=B.Z.create({baseURL:"http://59.110.7.219:1002",withCredentials:!1}),E=B.Z.create({baseURL:"http://localhost:8000",withCredentials:!0}),m=function(){var h=P()(t()().mark(function o(l,c){var g;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.post("/login/",{account:l,password:c});case 3:return g=n.sent,n.abrupt("return",g.data);case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},o,null,[[0,7]])}));return function(l,c){return h.apply(this,arguments)}}(),p=function(){var h=P()(t()().mark(function o(l,c){var g;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.post("/api/chat",{question:l,history:c});case 3:return g=n.sent,n.abrupt("return",g.data);case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},o,null,[[0,7]])}));return function(l,c){return h.apply(this,arguments)}}(),Z=function(){var h=P()(t()().mark(function o(l,c,g,s,n,I){var v;return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(l),e.next=4,E.post("/register/userInfo",{account:l,password:c,nickname:g,gender:s,birth:n,avatar:I});case 4:return v=e.sent,e.abrupt("return",v.data);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}},o,null,[[0,8]])}));return function(l,c,g,s,n,I){return h.apply(this,arguments)}}(),M=function(){var h=P()(t()().mark(function o(l){var c;return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,E.post("/register/",{email:l});case 3:return c=s.sent,s.abrupt("return",c.data);case 7:throw s.prev=7,s.t0=s.catch(0),s.t0;case 10:case"end":return s.stop()}},o,null,[[0,7]])}));return function(l){return h.apply(this,arguments)}}(),G=function(){var h=P()(t()().mark(function o(l){var c;return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,E.post("/register/",{captcha:l});case 3:return c=s.sent,s.abrupt("return",c.data);case 7:throw s.prev=7,s.t0=s.catch(0),s.t0;case 10:case"end":return s.stop()}},o,null,[[0,7]])}));return function(l){return h.apply(this,arguments)}}()},94191:function($,A,r){r.d(A,{Z:function(){return p}});var T=r(80696),t=r(24699),L=r(52385),P=r(93236),B={title:"title___xIGPY"},S=r(62086),E=function(M){var G=M.name;return(0,S.jsx)(T.Z,{children:(0,S.jsx)(t.Z,{children:(0,S.jsxs)(L.Z.Title,{level:3,className:B.title,children:["\u6B22\u8FCE\u4F7F\u7528 ",(0,S.jsx)("strong",{children:G})," \uFF01"]})})})},m=E,p=m},18847:function($,A,r){r.r(A),r.d(A,{default:function(){return oe}});var T=r(25359),t=r.n(T),L=r(57213),P=r.n(L),B=r(49811),S=r.n(B),E=r(54306),m=r.n(E),p=r(93236),Z=r(74904),M=r(46931),G=r(83),h=r(8749),o=r(2688),l=r(31159),c=r(86124),g=r(23282),s=r(95403),n=r(94191),I=r(25450),v={"form-box":"form-box___qZCiP"},O=r(49363),e=r(62086),ue=function(F,R){var b=new FileReader;b.addEventListener("load",function(){return R(b.result)}),b.readAsDataURL(F)},le=function(F){var R=F.type==="image/jpeg"||F.type==="image/png";R||h.ZP.error("You can only upload JPG/PNG file!");var b=F.size/1024/1024<2;return b||h.ZP.error("Image must smaller than 2MB!"),R&&b},ie=function(){var F=(0,s.useModel)("global"),R=F.name,b=(0,p.useState)(""),z=m()(b,2),D=z[0],U=z[1],J=(0,s.useModel)("@@initialState"),ce=J.initialState,de=J.setInitialState,pe=(0,p.useState)(!1),Y=m()(pe,2),ve=Y[0],k=Y[1],me=(0,p.useState)(""),Q=m()(me,2),X=Q[0],fe=Q[1],he=(0,p.useState)(!1),_=m()(he,2),ge=_[0],N=_[1],je=(0,p.useState)(!1),q=m()(je,2),Ce=q[0],x=q[1],Se=(0,p.useState)(""),ee=m()(Se,2),ye=ee[0],Pe=ee[1],we=(0,p.useState)(!1),re=m()(we,2),Ae=re[0],ae=re[1],Ee=(0,p.useState)(),se=m()(Ee,2),W=se[0],be=se[1],De=(0,p.useState)(!1),ne=m()(De,2),K=ne[0],te=ne[1];(0,p.useEffect)(function(){K&&setTimeout(function(){k(!1),N(!1),x(!1),te(!1)},5e3)},[K]);var Te=function(){var f=S()(t()().mark(function i(u){var j,d,w,a;return t()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return u.preventDefault(),j=u.currentTarget.username.value,d=u.currentTarget.password.value,C.prev=3,C.next=6,(0,O.x4)(j,d);case 6:w=C.sent,console.log(w.code),console.log(w.type),a=w,console.log(a.code),console.log(a.message),console.log(a.UserInfo),de(P()(P()({},ce),{},{loggedIn:!0,avatar:a.UserInfo.avatar,loginResponse:a})),s.history.push("/user"),C.next=21;break;case 17:C.prev=17,C.t0=C.catch(3),console.error(C.t0),U("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7528\u6237\u540D\u548C\u5BC6\u7801\u3002");case 21:case"end":return C.stop()}},i,null,[[3,17]])}));return function(u){return f.apply(this,arguments)}}(),Fe=function(){var f=S()(t()().mark(function i(u){var j,d;return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u.preventDefault(),j=u.currentTarget.email.value,a.prev=2,a.next=5,(0,O.oP)(j);case 5:d=a.sent,console.log(d.code),console.log(d.message),d.code===200&&(k(!1),N(!0),fe(j)),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(2),console.error(a.t0),U("\u90AE\u7BB1\u9A8C\u8BC1\u5931\u8D25");case 15:case"end":return a.stop()}},i,null,[[2,11]])}));return function(u){return f.apply(this,arguments)}}(),Be=function(){var f=S()(t()().mark(function i(u){var j,d;return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u.preventDefault(),j=u.currentTarget.captcha.value,a.prev=2,a.next=5,(0,O.WZ)(j);case 5:d=a.sent,console.log(d.code),console.log(d.message),d.code===200&&(x(!0),N(!1)),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(2),console.error(a.t0),U("\u90AE\u7BB1\u9A8C\u8BC1\u5931\u8D25");case 15:case"end":return a.stop()}},i,null,[[2,11]])}));return function(u){return f.apply(this,arguments)}}(),Re=function(){var f=S()(t()().mark(function i(u){var j,d,w,a,H;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return u.preventDefault(),j=u.currentTarget.nickname.value,d=u.currentTarget.password.value,w=u.currentTarget.birth.value,a=W,y.prev=5,console.log(X),y.next=9,(0,O.r2)(X,d,j,ye,w,a);case 9:H=y.sent,console.log(H),H.code===200&&(te(!0),U("")),y.next=18;break;case 14:y.prev=14,y.t0=y.catch(5),console.error(y.t0),U("\u7528\u6237\u6CE8\u518C\u5931\u8D25");case 18:case"end":return y.stop()}},i,null,[[5,14]])}));return function(u){return f.apply(this,arguments)}}(),Le=function(i){if(i.file.status==="uploading"){ae(!0);return}i.file.status==="done"&&ue(i.file.originFileObj,function(u){ae(!1),be(u)})},Me=(0,e.jsxs)("div",{children:[Ae?(0,e.jsx)(Z.Z,{}):(0,e.jsx)(M.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,e.jsx)(G._z,{ghost:!0,children:(0,e.jsxs)("div",{className:v.container,children:[(0,e.jsx)(n.Z,{name:(0,I.f)(R)}),(0,e.jsx)("div",{className:v["form-box"],children:K?(0,e.jsx)("div",{className:v["login-form-box"],children:(0,e.jsx)("h1",{children:"\u6CE8\u518C\u6210\u529F,5\u79D2\u540E\u8DF3\u8F6C\u5230\u767B\u5F55\u9875"})}):ve?(0,e.jsxs)("div",{className:v["register-form-box"],children:[(0,e.jsx)("h1",{children:"Register-\u8BF7\u8F93\u5165\u90AE\u7BB1"}),D&&(0,e.jsx)("p",{className:v.error,children:D}),(0,e.jsxs)("form",{onSubmit:Fe,children:[(0,e.jsx)("input",{type:"text",name:"email",placeholder:"\u90AE\u7BB1"}),(0,e.jsx)("input",{type:"submit",value:"\u9A8C\u8BC1\u90AE\u7BB1",onClick:function(){return N(!0)}})]})]}):ge?(0,e.jsxs)("div",{className:v["register-form-box"],children:[(0,e.jsx)("h1",{children:"Register-\u8BF7\u8F93\u5165\u6536\u5230\u7684\u9A8C\u8BC1\u7801"}),D&&(0,e.jsx)("p",{className:v.error,children:D}),(0,e.jsxs)("form",{onSubmit:Be,children:[(0,e.jsx)("input",{type:"text",name:"captcha",placeholder:"\u9A8C\u8BC1\u7801"}),(0,e.jsx)("input",{type:"submit",value:"\u9A8C\u8BC1",onClick:function(){return x(!0)}})]})]}):Ce?(0,e.jsxs)("div",{className:v["register-form-box"],children:[(0,e.jsx)("h1",{children:"Register-\u8F93\u5165\u7528\u6237\u8D44\u6599"}),D&&(0,e.jsx)("p",{className:v.error,children:D}),(0,e.jsxs)("form",{onSubmit:Re,children:[(0,e.jsx)("input",{type:"text",name:"nickname",placeholder:"\u7528\u6237\u540D\u79F0"}),(0,e.jsx)("input",{type:"password",name:"password",placeholder:"\u5BC6\u7801"}),(0,e.jsx)(o.Z,{defaultValue:"\u6B66\u88C5\u76F4\u5347\u673A",options:[{value:"\u7537",label:"\u7537"},{value:"\u5973",label:"\u5973"},{value:"\u6B66\u88C5\u76F4\u5347\u673A",label:"\u6B66\u88C5\u76F4\u5347\u673A"}],onChange:function(i){return Pe(i)}}),(0,e.jsx)(l.Z,{name:"birth",placeholder:"\u751F\u65E5"}),(0,e.jsx)(c.Z,{children:"\u4E0A\u4F20\u5934\u50CF\uFF1A"}),(0,e.jsx)(g.Z,{name:"avatar",listType:"picture-circle",className:"avatar-uploader",showUploadList:!1,beforeUpload:le,onChange:Le,children:W?(0,e.jsx)("img",{src:W,alt:"avatar",style:{width:"100%"}}):Me}),(0,e.jsx)("input",{type:"submit",value:"\u9A8C\u8BC1",onClick:function(){return x(!0)}})]})]}):(0,e.jsxs)("div",{className:v["login-form-box"],children:[(0,e.jsx)("h1",{children:"Login"}),D&&(0,e.jsx)("p",{className:v.error,children:D}),(0,e.jsxs)("form",{onSubmit:Te,children:[(0,e.jsx)("input",{type:"text",name:"username",placeholder:"Username"}),(0,e.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),(0,e.jsx)("input",{type:"submit",value:"\u767B\u5F55"})]}),(0,e.jsxs)("p",{children:["\u65B0\u7528\u6237?"," ",(0,e.jsx)("a",{href:"#",onClick:function(){return k(!0)},children:"\u6CE8\u518C\u8D26\u53F7"})]})]})})]})})},oe=ie},25450:function($,A,r){r.d(A,{f:function(){return T}});function T(t){return t.trim()}}}]);
